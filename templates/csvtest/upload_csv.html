{% extends 'base.html' %}

{% block container %}
    {% for message in messages %}
        <div class="alert alert-info">{{ message }}</div>
    {% endfor %}
    <div class="row">
        <div class="col-md-12">
            <p>Please upload a valid csv file to import data to the DEQAR system.</p>
        </div>
        <hr>
        <form action="{% url "csvtest:upload_csv" %}" method="POST" enctype="multipart/form-data" class="form-horizontal">
            {% csrf_token %}
            <div class="form-group">
                <label for="name" class="col-md-3 col-sm-3 col-xs-12 control-label">File: </label>
                <div class="col-md-8">
                    <input type="file" name="csv_file" id="csv_file" required="True" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-3 col-sm-3 col-xs-12 col-md-offset-3" style="margin-bottom:10px;">
                     <button class="btn btn-primary"> <span class="glyphicon glyphicon-upload" style="margin-right:5px;"></span>Upload </button>
                </div>
            </div>
        </form>
    </div>

    {% if response_list %}
    <div class="row">
        <div class="col-md-12">
            <h2>Submission Results</h2>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Row</th>
                        <th>Submission_status</th>
                        <th>Sanity_check_status</th>
                        <th>Errors</th>
                        <th>Report Flag</th>
                        <th>Report Warnings</th>
                        <th>Institution Warnings</th>
                    </tr>
                </thead>
                <tbody>
                    {% for response in response_list %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ response.submission_status }}</td>
                            <td>{{ response.sanity_check_status }}</td>
                            <td>{{ response.errors }}</td>
                            <td>{{ response.report_flag }}</td>
                            <td>{{ response.report_warnings }}</td>
                            <td>{{ response.institution_warnings }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
{% endblock %}